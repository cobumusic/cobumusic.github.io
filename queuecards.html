<!DOCTYPE html>
<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500&amp;display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <title>Queue Cards</title>
    </head>
    <style>
    body {
        font-family:'Roboto', sans-serif;
        background-color: white;
    }

    .flexContainer{
        display:flex;
        flex-direction: row;
        background-color:blue;
    }

    .flexItem{
        color:greenyellow;
    }
    </style>
    <body>
        <p>Deck:</p>
        <div id="deckDiv">
        </div>
        <br>
        <p>Queue:</p>
        <div id="queueDiv">
        </div>
        <br>
        <p>Your Hand:</p>
        <div id="playerHandDiv">
        </div>
        <script>
            const cards = [];
            const suits = ["circle", "triangle", "circle", "moon", "star"];
            var deckDiv = document.getElementById("deckDiv");
            var queueDiv = document.getElementById("queueDiv");
            var playerHandDiv = document.getElementById("playerHandDiv");
            var deck = [];
            var queue = [];
            var playerHand = [];

            function initializeCards(){
                for(let shape = 0; shape <= 4; shape++){
                    for(let val = 0; val <= 10; val++){
                        const card = {suit:suits[shape], value:val, status:"in deck"};
                        cards.push(card);
                    }
                }
            }

            function shuffleDeck(array){
                let currentIndex = array.length,  randomIndex;
                // While there remain elements to shuffle...
                while (currentIndex != 0) {
                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;

                    // And swap it with the current element.
                    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
                }

                return array;
            }

            function initializeDeck(){
                for(let i = 0; i < cards.length; i++){
                    const toRead = cards[i];
                    //console.log(toRead.suit);
                    //console.log(toRead["suit"]);
                    const card = {suit:toRead["suit"], value:toRead["value"], status:toRead["status"]};
                    deck.push(card);
                }
            }

            function newGame(){
                //initialize deck
                initializeCards();//the original set of cards
                initializeDeck();
                shuffleDeck(deck);

                //deal out deck
                for(let i = 0; i < 7; i++){
                    queue.push(deck.pop());
                    //TODO change statuses
                }

                //deal out the hand
                for(let i = 0; i < 5; i++){
                    playerHand.push(deck.pop());
                    //TODO change statuses
                }

                updateBoard();
            }

            function updateBoard(){
                //deckDiv.innerHTML = deck;
                deckDiv.innerHTML = deck.length + " cards in deck";
                
                var qToDisplay = "";
                for(let i = 0; i < queue.length; i++){
                    qToDisplay += queue[i]["value"] + " of " + queue[i]["suit"] + "s, "
                }
                qToDisplay = qToDisplay.slice(0, -2);
                queueDiv.innerHTML = qToDisplay;

                var playerHandToDisplay = "";
                for(let i = 0; i < playerHand.length; i++){
                    playerHandToDisplay += playerHand[i]["value"] + " of " + playerHand[i]["suit"] + "s, "
                }
                playerHandToDisplay = playerHandToDisplay.slice(0, -2);
                playerHandDiv.innerHTML = playerHandToDisplay;
                //playerHandDiv.innerHTML = playerHand;
            }

            newGame();
            console.log(deck);
        </script>
    </body>
</html>